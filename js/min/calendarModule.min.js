import{initializeApp as e}from"https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";import{getDatabase as a,ref as t,child as i,get as n,set as s,push as l,update as r,onValue as d,query as o,orderByChild as c,equalTo as m}from"https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";import{getFirestore as y,addDoc as b,setDoc as u,doc as g,collection as p}from"https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";import{firebaseConfig as k}from"../min/firebaseConfig.min.js";let app=e(k),database=a(app),db=y(app),bookCountRef=t(database,"book"),calendarEventsRef=t(database,"calendarEvents"),eventPromise=new Promise(function(e){n(calendarEventsRef).then(a=>{a.exists()&&e(Object.values(a.val()))})});function setDatabase(){let e=new Date,a=document.getElementById("dateTime").innerHTML,t;switch(a.split(",")[0].trim()){case"Senin":t="Monday";break;case"Selasa":t="Tuesday";break;case"Rabu":t="Wednesday";break;case"Kamis":t="Thursday";break;case"Jumat":t="Friday";break;case"Sabtu":t="Saturday";break;case"Minggu":t="Sunday"}let i=a.split(",")[1].split(" ")[1].trim(),n;switch(a.split(",")[1].split(" ")[2].trim()){case"Januari":n="January";break;case"Februari":n="February";break;case"Maret":n="March";break;case"April":n="April";break;case"Mei":n="May";break;case"Juni":n="June";break;case"Juli":n="July";break;case"Agustus":n="August";break;case"September":n="September";break;case"Oktober":n="October";break;case"November":n="November";break;case"Desember":n="December"}let r=a.split(",")[1].split(" ")[3].trim(),d=document.getElementById("playTime").innerHTML,o=d.split("-")[0].trim(),c=d.split("-")[1].trim(),m=document.getElementById("name").value.trim().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),y=document.getElementById("bookModal"),b=document.getElementById("modalContent"),u=document.getElementById("bookModalMulti"),g=l(bookCountRef),p=new Promise(function(l){""==m?document.getElementById("name").placeholder="Harap mengisi nama pemesan!":window.navigator.onLine&&(s(g,{top:a,bot:d,name:m,dates:{date:a,splitdate:{dotw:t,date:i,month:n,year:r,start:{dotw:t,date:i,month:n,year:r},end:{dotw:t,date:i,month:n,year:r}},time:d,splittime:{starttime:o,endtime:c}},status:{waitlist:!0},timestamps:{hms:e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),day:e.getDay(),dmy:e.getDate()+", "+e.getMonth()+", "+e.getFullYear(),ms:Date.now(),offsetUTC:e.getTimezoneOffset(),iso:e.toISOString()}}).then(function(){l(!0)}),y.style.opacity=0,y.style.visibility="hidden",b.style.visibility="hidden",u.style.visibility="hidden",b.style.display="none",u.style.display="none",document.getElementById("name").value="",document.getElementById("name").placeholder="Pesan atas nama?")}),k=document.getElementById("successModal");p.then(function(e){!0===e&&(y.style.opacity=1,y.style.visibility="visible",k.style.visibility="visible",k.style.display="block",console.log("Book Success"))})}function setDatabaseMulti(){let e=new Date,a=document.getElementById("dateTimeStart").innerHTML+" "+document.getElementById("playTimeStart").innerHTML,t=document.getElementById("dateTimeEnd").innerHTML+" "+document.getElementById("playTimeEnd").innerHTML,i=document.getElementById("dateTimeStart").innerHTML+" - "+document.getElementById("dateTimeEnd").innerHTML,n=document.getElementById("dateTimeStart").innerHTML,r=document.getElementById("dateTimeEnd").innerHTML,d,o;switch(n.split(",")[0].trim()){case"Senin":d="Monday";break;case"Selasa":d="Tuesday";break;case"Rabu":d="Wednesday";break;case"Kamis":d="Thursday";break;case"Jumat":d="Friday";break;case"Sabtu":d="Saturday";break;case"Minggu":d="Sunday"}switch(r.split(",")[0].trim()){case"Senin":o="Monday";break;case"Selasa":o="Tuesday";break;case"Rabu":o="Wednesday";break;case"Kamis":o="Thursday";break;case"Jumat":o="Friday";break;case"Sabtu":o="Saturday";break;case"Minggu":o="Sunday"}let c=n.split(",")[1].split(" ")[1].trim(),m=r.split(",")[1].split(" ")[1].trim(),y,b;switch(n.split(",")[1].split(" ")[2].trim()){case"Januari":y="January";break;case"Februari":y="February";break;case"Maret":y="March";break;case"April":y="April";break;case"Mei":y="May";break;case"Juni":y="June";break;case"Juli":y="July";break;case"Agustus":y="August";break;case"September":y="September";break;case"Oktober":y="October";break;case"November":y="November";break;case"Desember":y="December"}switch(r.split(",")[1].split(" ")[2].trim()){case"Januari":b="January";break;case"Februari":b="February";break;case"Maret":b="March";break;case"April":b="April";break;case"Mei":b="May";break;case"Juni":b="June";break;case"Juli":b="July";break;case"Agustus":b="August";break;case"September":b="September";break;case"Oktober":b="October";break;case"November":b="November";break;case"Desember":b="December"}let u=n.split(",")[1].split(" ")[3].trim(),g=r.split(",")[1].split(" ")[3].trim(),p=document.getElementById("playTimeStart").innerHTML+" - "+document.getElementById("playTimeEnd").innerHTML,k=document.getElementById("playTimeStart").innerHTML,$=document.getElementById("playTimeEnd").innerHTML,h=document.getElementById("nameTwo").value.trim().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),M=document.getElementById("bookModal"),T=document.getElementById("modalContent"),E=document.getElementById("bookModalMulti"),v=l(bookCountRef),f=new Promise(function(l){""==h?document.getElementById("name").placeholder="Harap mengisi nama pemesan!":window.navigator.onLine&&(s(v,{top:a,bot:t,name:h,dates:{date:i,splitdate:{start:{full:n,dotw:d,date:c,month:y,year:u},end:{full:r,dotw:o,date:m,month:b,year:g}},time:p,splittime:{starttime:k,endtime:$}},status:{waitlist:!0},timestamps:{hms:e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),day:e.getDay(),dmy:e.getDate()+", "+e.getMonth()+", "+e.getFullYear(),ms:Date.now(),offsetUTC:e.getTimezoneOffset(),iso:e.toISOString()}}).then(function(){l(!0)}),M.style.opacity=0,M.style.visibility="hidden",T.style.visibility="hidden",E.style.visibility="hidden",T.style.display="none",E.style.display="none",document.getElementById("name").value="",document.getElementById("name").placeholder="Pesan atas nama?")});f.then(function(e){if(!0===e){let a=document.getElementById("bookModal"),t=document.getElementById("successModal");a.style.opacity=1,a.style.visibility="visible",t.style.display="block",t.style.visibility="visible",console.log("Book Success")}})}function fullcalendarConfig(){let e=document.getElementById("calendar"),a=new FullCalendar.Calendar(e,{locale:"id",selectable:!0,views:{timeGridFourDay:{type:"timeGrid",duration:{days:4}}},windowResize:function(){window.innerWidth<769?(a.changeView("timeGridDay"),a.setOption("contentHeight",1e3)):window.innerWidth<982?(a.changeView("timeGridFourDay"),a.setOption("contentHeight",1e3)):window.innerWidth<1240?(a.changeView("timeGridWeek"),a.setOption("contentHeight",1e3)):(a.changeView("timeGridWeek"),a.setOption("contentHeight"))},selectLongPressDelay:250,select:function(e){let a=String(e.start),t=String(e.end),i=a.split(" "),n=t.split(" "),s;switch(i[0]){case"Mon":s="Senin";break;case"Tue":s="Selasa";break;case"Wed":s="Rabu";break;case"Thu":s="Kamis";break;case"Fri":s="Jumat";break;case"Sat":s="Sabtu";break;case"Sun":s="Minggu"}let l,r=l=i[2]<10?i[2]%10:i[2],d;switch(i[1]){case"Jan":d="Januari";break;case"Feb":d="Februari";break;case"Mar":d="Maret";break;case"Apr":d="April";break;case"May":d="Mei";break;case"Jun":d="Juni";break;case"Jul":d="Juli";break;case"Aug":d="Agustus";break;case"Sep":d="September";break;case"Oct":d="Oktober";break;case"Nov":d="November";break;case"Dec":d="Desember"}let o=i[3],c=i[4],m=c.split(":")[0],y=c.split(":")[1],b;switch(n[0]){case"Mon":b="Senin";break;case"Tue":b="Selasa";break;case"Wed":b="Rabu";break;case"Thu":b="Kamis";break;case"Fri":b="Jumat";break;case"Sat":b="Sabtu";break;case"Sun":b="Minggu"}let u,g=u=n[2]<10?n[2]%10:n[2],p;switch(n[1]){case"Jan":p="Januari";break;case"Feb":p="Februari";break;case"Mar":p="Maret";break;case"Apr":p="April";break;case"May":p="Mei";break;case"Jun":p="Juni";break;case"Jul":p="Juli";break;case"Aug":p="Agustus";break;case"Sep":p="September";break;case"Oct":p="Oktober";break;case"Nov":p="November";break;case"Dec":p="Desember"}let k=n[3],$=n[4],h=$.split(":")[0],M=$.split(":")[1],T=0;if(!1===e.allDay){let E,v=Math.abs(Math.round((e.end.getTime()-e.start.getTime())/1e3/60))/60;for(let f=Number(m)-8+Number(y)/60;f<Number(h)-8+Number(M)/60;f+=.5)f>=10?T+=7e4:T+=45e3;if(Number(m)>=18&&23>=Number(h))T=14e4*v;else if(Number(m)>=9&&18>Number(h))T=9e4*v;else if(17==Number(m)&&30==Number(y)&&18==Number(h))T=9e4*v;else if(18>=Number(m)&&Number(h)>=18){let B;T=9e4*v+(v+(Number(m)-18))*5e4}document.getElementById("priceToPay").innerHTML="Rp "+T.toLocaleString("id");let I,_=s+", "+r+" "+d+" "+o,w=b+", "+g+" "+p+" "+k;I=_,document.getElementById("dateTime").innerHTML=I,document.getElementById("playTime").innerHTML=m+":"+y+" - "+h+":"+M,document.getElementById("dateTimeStart").innerHTML=_,document.getElementById("dateTimeEnd").innerHTML=w,document.getElementById("playTimeStart").innerHTML=m+":"+y,document.getElementById("playTimeEnd").innerHTML=h+":"+M;let S=document.getElementById("bookModal"),D=document.getElementById("modalContent"),H=document.getElementById("bookModalMulti"),J=document.getElementById("successModal"),L=document.getElementById("closeModal"),F=document.getElementById("closeModalMulti"),C=document.getElementById("closeModalSuccess");Number(r)!==Number(g)?(S.style.opacity=1,S.style.visibility="visible",D.style.display="none",H.style.display="block",H.style.visibility="visible",J.style.display="none"):(S.style.opacity=1,S.style.visibility="visible",H.style.display="none",D.style.display="block",D.style.visibility="visible",J.style.display="none"),L.onclick=function(){S.style.opacity=0,S.style.visibility="hidden",D.style.visibility="hidden",D.style.display="none",H.style.visibility="hidden",document.getElementById("name").value="",document.getElementById("name").placeholder="Pesan atas nama?"},F.onclick=function(){S.style.opacity=0,S.style.visibility="hidden",D.style.visibility="hidden",H.style.visibility="hidden",H.style.display="none",document.getElementById("nameTwo").value="",document.getElementById("nameTwo").placeholder="Pesan atas nama?"},C.onclick=function(){S.style.opacity=0,S.style.visibility="hidden",J.style.visibility="hidden"},window.onclick=function(e){e.target==S&&(S.style.opacity=0,S.style.visibility="hidden",D.style.visibility="hidden",H.style.visibility="hidden",J.style.visibility="hidden",document.getElementById("name").value="",document.getElementById("name").placeholder="Pesan atas nama?",document.getElementById("nameTwo").value="",document.getElementById("nameTwo").placeholder="Pesan atas nama?")}}},googleCalendarApiKey:"AIzaSyB0sB35p1ky0BsetyyRBD0YgJJEBlDdFUk",eventSources:[eventPromise.then(function(e){a.addEventSource({events:e,backgroundColor:"blue"})}),{googleCalendarId:"098a6b3997280af33e63c06376ae67be8d1d0b2bd7c1636eccb86b84db3fea54@group.calendar.google.com",backgroundColor:"red"},{googleCalendarId:"86e36adb6db06d7b381dc68006486ca6110b2421794fb5ab9bb9a2be0995be3c@group.calendar.google.com",backgroundColor:"yellow"},{googleCalendarId:"71ebf95725a0e15519051791c4ae7900eeb317b43c1f96bafe5ead9f9b31e048@group.calendar.google.com",backgroundColor:"purple"},{googleCalendarId:"id.indonesian#holiday@group.v.calendar.google.com",backgroundColor:"orange"},],validRange:function(){let e=new Date,a=new Date;return e.setDate(e.getDate()),a.setDate(a.getDate()+29),{start:e,end:a}},allDayText:"",titleFormat:{month:"long",year:"numeric"},dayHeaderFormat:{weekday:"long",day:"numeric"},slotLabelFormat:{hour:"numeric",minute:"numeric",hour12:!1,omitZeroMinute:!1},slotMinTime:{hours:9},slotMaxTime:{hours:23},initialView:responsiveView(),headerToolbar:{left:"today",center:"title",right:"prev next"},buttonText:{today:""},stickyHeaderDates:!0,expandRows:!0,slotDuration:"01:00:00",nowIndicator:!0,firstDay:1});a.render()}function responsiveView(){let e;return window.innerWidth<769?"timeGridDay":window.innerWidth<982?"timeGridFourDay":"timeGridWeek"}function redirectWhatsapp(){let e=document.getElementById("dateTime").innerHTML,a=document.getElementById("playTime").innerHTML,t=document.getElementById("name").value.trim().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),i;setDatabase(),""==t?(i="#",document.getElementById("name").placeholder="Harap mengisi nama pemesan!"):i="https://wa.me/6285250851118?text=Booking untuk:%0aTanggal%09: "+e+"%0aJam%09: "+a+"%0aNama%09: "+t,window.location.href=i}function redirectWhatsappOnly(){setDatabaseMulti();let e=document.getElementById("dateTimeStart").innerHTML,a=document.getElementById("dateTimeEnd").innerHTML,t=document.getElementById("playTimeStart").innerHTML,i=document.getElementById("playTimeEnd").innerHTML,n=document.getElementById("nameTwo").value.trim().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),s;""==n?(s="#",document.getElementById("nameTwo").placeholder="Harap mengisi nama pemesan!"):s="https://wa.me/6285250851118?text=Booking untuk:%0aMulai%09: "+e+" "+t+"%0aSelesai%09: "+a+" "+i+"%0aNama%09: "+n,window.location.href=s}window.fullcalendarConfig=fullcalendarConfig,window.setDatabase=setDatabase,window.setDatabaseMulti=setDatabaseMulti,window.responsiveView=responsiveView,window.redirectWhatsapp=redirectWhatsapp,window.redirectWhatsappOnly=redirectWhatsappOnly;